<!DOCTYPE HTML>
<html>
<head>
<title>global HTML page</title>
<script type="text/javascript">

function respondToMessage(theMessageEvent) {
    // Listen for Colorful Listview
    if(theMessageEvent.name === "GetColorfulListviewFromSettings")
    {

        colorfulListview = safari.extension.settings.getItem("colorfulListview");

        theMessageEvent.target.page.dispatchMessage("GetColorfulListviewFromSettingsDone", colorfulListview);
    }

    // Listen for UnreadCount
    if(theMessageEvent.name === "GetUnreadCountFromSettings")
    {
        unreadCount = safari.extension.settings.getItem("unreadCount");

        theMessageEvent.target.page.dispatchMessage("GetUnreadCountFromSettingsDone", unreadCount);
    }

    // Listen for Collapse/Expand button
    if(theMessageEvent.name === "GetExpandButtonFromSettings")
    {
        expandButton = safari.extension.settings.getItem("expandButton");

        theMessageEvent.target.page.dispatchMessage("GetExpandButtonFromSettingsDone", expandButton);
    }

    // Listen for Widescreen
    /*if(theMessageEvent.name === "GetWideScreenFromSettings")
    {
        wideScreen = safari.extension.settings.getItem("wideScreen");

        theMessageEvent.target.page.dispatchMessage("GetWideScreenFromSettingsDone", wideScreen);
    }*/

    // Listen for Article Focus
    if(theMessageEvent.name === "GetArticleFocusFromSettings")
    {
        articleFocus = safari.extension.settings.getItem("articleFocus");

        theMessageEvent.target.page.dispatchMessage("GetArticleFocusFromSettingsDone", articleFocus);
    }

    // Listen for Inline Preview
    if(theMessageEvent.name === "GetInlinePreviewFromSettings")
    {
        inlinePreview = safari.extension.settings.getItem("inlinePreview");

        theMessageEvent.target.page.dispatchMessage("GetInlinePreviewFromSettingsDone", inlinePreview);
    }
    
    // Listen for Starred Counter
    if(theMessageEvent.name === "GetStarredCounterFromSettings")
    {

        starredCounter = safari.extension.settings.getItem("starredcounter");

        theMessageEvent.target.page.dispatchMessage("GetStarredCounterFromSettingsDone", starredCounter);
    }
}

    safari.application.addEventListener("message",respondToMessage,false);
</script>
</head>
<body>
</body>
</html>